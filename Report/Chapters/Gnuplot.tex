\chapter{Gnuplot}\label{gnuplot}
Nella nostra implementazione, una volta ottenuta la soluzione del problema di ottimizzazione, ne viene disegnato il grafo per facilitare all'utente la comprensione della sua correttezza. Per fare ciò viene utilizzato GNUplot, un programma di tipo command-driven.\\
Per poterlo sfruttare all'interno del proprio programma esistono due metodi:
\begin{itemize}
\item{Collegare la libreria ed invocare le sue funzioni all'interno del programma}
\item{Collegare l'eseguibile interattivo al proprio programma. In questo caso i comandi devono essere passati all'eseguibile attraverso l'utilizzo di un file di testo e di un pipe.}\\
\end{itemize}
In questa trattazione è stato scelto il secondo metodo. All'interno di un file vengono specificati i comandi da eseguire in Gnuplot e le caratteristiche grafiche che deve aver il grafo da rappresentare. Un esempio di tale file, viene riportato nelle seguenti righe:\\

\lstinputlisting[caption={\footnotesize{style.txt}}, style=code, firstnumber=1, firstline=1, lastline=12, label=style_example]{Source/style_example.txt}

Nell'esempio citato, nella prima parte viene definito lo stile, il colore delle linee e la tipologia di punti, che verrano in seguito visualizzati all'interno del grafico prodotto.\\ In seguito viene effettuato il plot, analizzando il file \textbf{solution.dat}, contenente le informazioni relative alla soluzione del problema, in cui ciascuna riga ha la seguente forma:
\begin{center}
\begin{tabular}{c}
\begin{lstlisting}[linewidth=290pt,basicstyle=\footnotesize\sffamily,]     
coordinata_x   coordinata_y   posizione_nel_tour
\end{lstlisting}
\end{tabular}
\end{center}
\textbf{coordinata\_x} rappresenta la coordinata x del nodo;\\
\textbf{coordinata\_y} rappresenta la coordinata y del nodo;\\
\textbf{posizione\_nel\_tour} rappresenta l'ordine del nodo all'interno del tour, assunto come nodo di origine il nodo 1.\\\\
Il grafico viene generato dal comando \textbf{plot}, leggendo tutte le righe non vuote e disegnando un punto nella posizione \textbf{(coordinata\_x, coordinata\_y)} del grafico 2D. In seguito viene tracciata una linea solo tra coppie di punti legati a righe consecutive non vuote nel file \textbf{solution.dat}.\\\\
Attraverso le istruzioni riportate nelle righe 10-12 di \textbf{style.txt}, viene invece salvato il grafico appena generato nell'immagine \textbf{solution.png}.\\\\
Di seguito vengono riportate le varie fasi necessarie alla definizione di un pipe e all'utilizzo di questo per eseguire comandi in GNUplot:
\begin{itemize}
\item{\textbf{Definizione del pipe}
\lstinputlisting[style=code, firstnumber=1, firstline=1, lastline=1, label=style_example language=C]{Source/gnuplotC.txt}
dove \textbf{GNUPLOT\_EXE} è una stringa composta dal percorso completo dell'eseguibile di GNUplot, seguita dall'argomento \textbf{-persistent} (es. \textit{"D:/Programs/GNUplot/bin/gnuplot.exe -persistent"}).
}
\item{\textbf{Passaggio delle istruzioni a GNUplot}
\lstinputlisting[style=code, firstnumber=2, firstline=2, lastline=10, label=style_example, language=C]{Source/gnuplotC.txt}
viene passata una riga alla volta, del file \textbf{style.txt}, a GNUplot mediante il pipe precedentemente creato.
}
\item{\textbf{Chiusura del pipe}
\lstinputlisting[style=code, firstnumber=11, firstline=11, lastline=11, label=style_example, language=C]{Source/gnuplotC.txt}
}
\end{itemize}